/**
 * é—¯å…³æ¨¡å¼å…³å¡é…ç½®æ•°æ®
 * HydroQuiz - æ°´åˆ©å·¥ç¨‹æ£€æµ‹å‘˜åˆ·é¢˜å®
 */
import { GameChapter, GameLevel, GameDifficulty } from '../common/types/GameTypes';
import { AppConstants } from '../common/constants/AppConstants';
import { ThemeColors } from '../theme/ThemeColors';

/**
 * åˆ›å»ºå…³å¡
 */
function createLevel(
  chapterId: string,
  levelNumber: number,
  name: string,
  description: string,
  questionCount: number,
  difficulty: GameDifficulty,
  requiredStars: number
): GameLevel {
  return {
    id: `${chapterId}_level_${levelNumber}`,
    chapterId: chapterId,
    levelNumber: levelNumber,
    name: name,
    description: description,
    questionCount: questionCount,
    difficulty: difficulty,
    requiredStars: requiredStars,
    isUnlocked: levelNumber === 1,
    bestStars: 0,
    bestScore: 0,
    completedTimes: 0
  };
}

/**
 * åŸºç¡€çŸ¥è¯†ç« èŠ‚å…³å¡
 */
const BASIC_LEVELS: GameLevel[] = [
  createLevel('chapter_basic', 1, 'åˆè¯†æ°´åˆ©', 'äº†è§£æ°´åˆ©å·¥ç¨‹åŸºç¡€æ¦‚å¿µ', 5, 'easy', 0),
  createLevel('chapter_basic', 2, 'åŸºç¡€æ¦‚å¿µ', 'æŒæ¡åŸºæœ¬æœ¯è¯­å’Œå®šä¹‰', 5, 'easy', 2),
  createLevel('chapter_basic', 3, 'æ£€æµ‹å…¥é—¨', 'å­¦ä¹ æ£€æµ‹åŸºæœ¬æµç¨‹', 6, 'easy', 5),
  createLevel('chapter_basic', 4, 'æ ‡å‡†è§„èŒƒ', 'ç†Ÿæ‚‰ç›¸å…³æ ‡å‡†è§„èŒƒ', 6, 'medium', 8),
  createLevel('chapter_basic', 5, 'è´¨é‡æ§åˆ¶', 'äº†è§£è´¨é‡æ§åˆ¶è¦ç‚¹', 7, 'medium', 12),
  createLevel('chapter_basic', 6, 'å®‰å…¨çŸ¥è¯†', 'æŒæ¡å®‰å…¨æ“ä½œè§„ç¨‹', 7, 'medium', 16),
  createLevel('chapter_basic', 7, 'ç»¼åˆåº”ç”¨', 'ç»¼åˆè¿ç”¨åŸºç¡€çŸ¥è¯†', 8, 'hard', 20),
  createLevel('chapter_basic', 8, 'åŸºç¡€Boss', 'åŸºç¡€çŸ¥è¯†ç»ˆææŒ‘æˆ˜', 10, 'boss', 24)
];

/**
 * æ··å‡åœŸå·¥ç¨‹ç« èŠ‚å…³å¡
 */
const CONCRETE_LEVELS: GameLevel[] = [
  createLevel('chapter_concrete', 1, 'æ··å‡åœŸåŸºç¡€', 'è®¤è¯†æ··å‡åœŸææ–™', 5, 'easy', 0),
  createLevel('chapter_concrete', 2, 'åŸææ–™æ£€æµ‹', 'æ°´æ³¥ã€éª¨æ–™æ£€æµ‹', 5, 'easy', 2),
  createLevel('chapter_concrete', 3, 'é…åˆæ¯”è®¾è®¡', 'æ··å‡åœŸé…åˆæ¯”', 6, 'easy', 5),
  createLevel('chapter_concrete', 4, 'æ‹Œåˆç‰©æ€§èƒ½', 'å·¥ä½œæ€§èƒ½æ£€æµ‹', 6, 'medium', 8),
  createLevel('chapter_concrete', 5, 'å¼ºåº¦æ£€æµ‹', 'æŠ—å‹å¼ºåº¦è¯•éªŒ', 7, 'medium', 12),
  createLevel('chapter_concrete', 6, 'è€ä¹…æ€§æ£€æµ‹', 'æŠ—æ¸—ã€æŠ—å†»æ£€æµ‹', 7, 'medium', 16),
  createLevel('chapter_concrete', 7, 'å¤–åŠ å‰‚æ£€æµ‹', 'å¤–åŠ å‰‚æ€§èƒ½æ£€æµ‹', 7, 'hard', 20),
  createLevel('chapter_concrete', 8, 'ç»“æ„æ£€æµ‹', 'ç»“æ„å®ä½“æ£€æµ‹', 8, 'hard', 24),
  createLevel('chapter_concrete', 9, 'ç¼ºé™·å¤„ç†', 'ç¼ºé™·æ£€æµ‹ä¸å¤„ç†', 8, 'hard', 28),
  createLevel('chapter_concrete', 10, 'æ··å‡åœŸBoss', 'æ··å‡åœŸç»ˆææŒ‘æˆ˜', 12, 'boss', 32)
];

/**
 * å²©åœŸå·¥ç¨‹ï¼ˆå²©çŸ³ã€åœŸå·¥ï¼‰ç« èŠ‚å…³å¡
 */
const GEOTECHNICAL_ROCK_LEVELS: GameLevel[] = [
  createLevel('chapter_geo_rock', 1, 'å²©çŸ³åŸºç¡€', 'å²©çŸ³åˆ†ç±»ä¸ç‰¹æ€§', 5, 'easy', 0),
  createLevel('chapter_geo_rock', 2, 'åœŸçš„åˆ†ç±»', 'åœŸçš„å·¥ç¨‹åˆ†ç±»', 5, 'easy', 2),
  createLevel('chapter_geo_rock', 3, 'ç‰©ç†æ€§è´¨', 'ç‰©ç†æ€§è´¨è¯•éªŒ', 6, 'easy', 5),
  createLevel('chapter_geo_rock', 4, 'åŠ›å­¦æ€§è´¨', 'åŠ›å­¦æ€§è´¨è¯•éªŒ', 6, 'medium', 8),
  createLevel('chapter_geo_rock', 5, 'ç°åœºè¯•éªŒ', 'åŸä½æµ‹è¯•æ–¹æ³•', 7, 'medium', 12),
  createLevel('chapter_geo_rock', 6, 'å–æ ·æŠ€æœ¯', 'å–æ ·ä¸ä¿å­˜', 7, 'medium', 16),
  createLevel('chapter_geo_rock', 7, 'æ•°æ®åˆ†æ', 'è¯•éªŒæ•°æ®å¤„ç†', 8, 'hard', 20),
  createLevel('chapter_geo_rock', 8, 'å²©åœŸBoss', 'å²©åœŸç»ˆææŒ‘æˆ˜', 10, 'boss', 24)
];

/**
 * å²©åœŸå·¥ç¨‹ï¼ˆåœ°åŸºä¸åŸºç¡€ï¼‰ç« èŠ‚å…³å¡
 */
const GEOTECHNICAL_FOUNDATION_LEVELS: GameLevel[] = [
  createLevel('chapter_geo_found', 1, 'åœ°åŸºåŸºç¡€', 'åœ°åŸºåŸºç¡€æ¦‚å¿µ', 5, 'easy', 0),
  createLevel('chapter_geo_found', 2, 'æ‰¿è½½åŠ›', 'åœ°åŸºæ‰¿è½½åŠ›æ£€æµ‹', 5, 'easy', 2),
  createLevel('chapter_geo_found', 3, 'æ¡©åŸºæ£€æµ‹', 'æ¡©åŸºç¡€æ£€æµ‹æ–¹æ³•', 6, 'medium', 5),
  createLevel('chapter_geo_found', 4, 'æ²‰é™è§‚æµ‹', 'æ²‰é™å˜å½¢ç›‘æµ‹', 6, 'medium', 8),
  createLevel('chapter_geo_found', 5, 'åŸºå‘ç›‘æµ‹', 'åŸºå‘å·¥ç¨‹ç›‘æµ‹', 7, 'medium', 12),
  createLevel('chapter_geo_found', 6, 'åœ°åŸºå¤„ç†', 'åœ°åŸºå¤„ç†æ£€æµ‹', 7, 'hard', 16),
  createLevel('chapter_geo_found', 7, 'ç»¼åˆæ£€æµ‹', 'ç»¼åˆæ£€æµ‹æŠ€æœ¯', 8, 'hard', 20),
  createLevel('chapter_geo_found', 8, 'åœ°åŸºBoss', 'åœ°åŸºç»ˆææŒ‘æˆ˜', 10, 'boss', 24)
];

/**
 * é‡æµ‹ç« èŠ‚å…³å¡
 */
const MEASUREMENT_LEVELS: GameLevel[] = [
  createLevel('chapter_measure', 1, 'é‡æµ‹åŸºç¡€', 'é‡æµ‹åŸºæœ¬æ¦‚å¿µ', 5, 'easy', 0),
  createLevel('chapter_measure', 2, 'æµ‹é‡ä»ªå™¨', 'å¸¸ç”¨æµ‹é‡ä»ªå™¨', 5, 'easy', 2),
  createLevel('chapter_measure', 3, 'æ°´å‡†æµ‹é‡', 'æ°´å‡†æµ‹é‡æ–¹æ³•', 6, 'easy', 5),
  createLevel('chapter_measure', 4, 'è§’åº¦æµ‹é‡', 'è§’åº¦æµ‹é‡æŠ€æœ¯', 6, 'medium', 8),
  createLevel('chapter_measure', 5, 'è·ç¦»æµ‹é‡', 'è·ç¦»æµ‹é‡æ–¹æ³•', 7, 'medium', 12),
  createLevel('chapter_measure', 6, 'å˜å½¢ç›‘æµ‹', 'å˜å½¢ç›‘æµ‹æŠ€æœ¯', 7, 'medium', 16),
  createLevel('chapter_measure', 7, 'æ•°æ®å¤„ç†', 'æµ‹é‡æ•°æ®å¤„ç†', 8, 'hard', 20),
  createLevel('chapter_measure', 8, 'é‡æµ‹Boss', 'é‡æµ‹ç»ˆææŒ‘æˆ˜', 10, 'boss', 24)
];

/**
 * é‡‘å±ç»“æ„ç« èŠ‚å…³å¡
 */
const METAL_LEVELS: GameLevel[] = [
  createLevel('chapter_metal', 1, 'é‡‘å±åŸºç¡€', 'é‡‘å±ææ–™åŸºç¡€', 5, 'easy', 0),
  createLevel('chapter_metal', 2, 'é’¢ææ£€æµ‹', 'é’¢ææ€§èƒ½æ£€æµ‹', 5, 'easy', 2),
  createLevel('chapter_metal', 3, 'ç„Šæ¥æ£€æµ‹', 'ç„Šæ¥è´¨é‡æ£€æµ‹', 6, 'medium', 5),
  createLevel('chapter_metal', 4, 'æ— æŸæ£€æµ‹', 'æ— æŸæ£€æµ‹æŠ€æœ¯', 6, 'medium', 8),
  createLevel('chapter_metal', 5, 'é˜²è…æ£€æµ‹', 'é˜²è…æ¶‚å±‚æ£€æµ‹', 7, 'medium', 12),
  createLevel('chapter_metal', 6, 'é—¸é—¨æ£€æµ‹', 'é—¸é—¨ç»“æ„æ£€æµ‹', 7, 'hard', 16),
  createLevel('chapter_metal', 7, 'ç»¼åˆæ£€æµ‹', 'ç»¼åˆæ£€æµ‹æŠ€æœ¯', 8, 'hard', 20),
  createLevel('chapter_metal', 8, 'é‡‘å±Boss', 'é‡‘å±ç»ˆææŒ‘æˆ˜', 10, 'boss', 24)
];

/**
 * æœºæ¢°ç”µæ°”ç« èŠ‚å…³å¡
 */
const MECHANICAL_LEVELS: GameLevel[] = [
  createLevel('chapter_mech', 1, 'æœºæ¢°åŸºç¡€', 'æœºæ¢°è®¾å¤‡åŸºç¡€', 5, 'easy', 0),
  createLevel('chapter_mech', 2, 'ç”µæ°”åŸºç¡€', 'ç”µæ°”è®¾å¤‡åŸºç¡€', 5, 'easy', 2),
  createLevel('chapter_mech', 3, 'å¯é—­æœºæ£€æµ‹', 'å¯é—­æœºæ£€æµ‹', 6, 'medium', 5),
  createLevel('chapter_mech', 4, 'æ°´æ³µæ£€æµ‹', 'æ°´æ³µæ€§èƒ½æ£€æµ‹', 6, 'medium', 8),
  createLevel('chapter_mech', 5, 'ç”µæœºæ£€æµ‹', 'ç”µæœºæ€§èƒ½æ£€æµ‹', 7, 'medium', 12),
  createLevel('chapter_mech', 6, 'æ§åˆ¶ç³»ç»Ÿ', 'æ§åˆ¶ç³»ç»Ÿæ£€æµ‹', 7, 'hard', 16),
  createLevel('chapter_mech', 7, 'ç»¼åˆæ£€æµ‹', 'ç»¼åˆæ£€æµ‹æŠ€æœ¯', 8, 'hard', 20),
  createLevel('chapter_mech', 8, 'æœºç”µBoss', 'æœºç”µç»ˆææŒ‘æˆ˜', 10, 'boss', 24)
];

/**
 * æ‰€æœ‰ç« èŠ‚æ•°æ®
 */
export const GAME_CHAPTERS: GameChapter[] = [
  {
    id: 'chapter_basic',
    subjectId: AppConstants.SUBJECT_BASIC,
    name: 'åŸºç¡€çŸ¥è¯†',
    shortName: 'åŸºç¡€',
    icon: 'ğŸ“š',
    color: ThemeColors.SUBJECT_BASIC,
    levels: BASIC_LEVELS,
    totalStars: BASIC_LEVELS.length * 3,
    earnedStars: 0,
    isUnlocked: true,
    order: 1
  },
  {
    id: 'chapter_concrete',
    subjectId: AppConstants.SUBJECT_CONCRETE,
    name: 'æ··å‡åœŸå·¥ç¨‹',
    shortName: 'æ··å‡åœŸ',
    icon: 'ğŸ—ï¸',
    color: ThemeColors.SUBJECT_CONCRETE,
    levels: CONCRETE_LEVELS,
    totalStars: CONCRETE_LEVELS.length * 3,
    earnedStars: 0,
    isUnlocked: false,
    order: 2
  },
  {
    id: 'chapter_geo_rock',
    subjectId: AppConstants.SUBJECT_GEOTECHNICAL_ROCK,
    name: 'å²©åœŸå·¥ç¨‹ï¼ˆå²©çŸ³ã€åœŸå·¥ï¼‰',
    shortName: 'å²©åœŸ',
    icon: 'ğŸª¨',
    color: ThemeColors.SUBJECT_GEOTECHNICAL_ROCK,
    levels: GEOTECHNICAL_ROCK_LEVELS,
    totalStars: GEOTECHNICAL_ROCK_LEVELS.length * 3,
    earnedStars: 0,
    isUnlocked: false,
    order: 3
  },
  {
    id: 'chapter_geo_found',
    subjectId: AppConstants.SUBJECT_GEOTECHNICAL_FOUNDATION,
    name: 'å²©åœŸå·¥ç¨‹ï¼ˆåœ°åŸºä¸åŸºç¡€ï¼‰',
    shortName: 'åœ°åŸº',
    icon: 'ğŸ›ï¸',
    color: ThemeColors.SUBJECT_GEOTECHNICAL_FOUNDATION,
    levels: GEOTECHNICAL_FOUNDATION_LEVELS,
    totalStars: GEOTECHNICAL_FOUNDATION_LEVELS.length * 3,
    earnedStars: 0,
    isUnlocked: false,
    order: 4
  },
  {
    id: 'chapter_measure',
    subjectId: AppConstants.SUBJECT_MEASUREMENT,
    name: 'é‡æµ‹',
    shortName: 'é‡æµ‹',
    icon: 'ğŸ“',
    color: ThemeColors.SUBJECT_MEASUREMENT,
    levels: MEASUREMENT_LEVELS,
    totalStars: MEASUREMENT_LEVELS.length * 3,
    earnedStars: 0,
    isUnlocked: false,
    order: 5
  },
  {
    id: 'chapter_metal',
    subjectId: AppConstants.SUBJECT_METAL,
    name: 'é‡‘å±ç»“æ„',
    shortName: 'é‡‘å±',
    icon: 'âš™ï¸',
    color: ThemeColors.SUBJECT_METAL,
    levels: METAL_LEVELS,
    totalStars: METAL_LEVELS.length * 3,
    earnedStars: 0,
    isUnlocked: false,
    order: 6
  },
  {
    id: 'chapter_mech',
    subjectId: AppConstants.SUBJECT_MECHANICAL,
    name: 'æœºæ¢°ç”µæ°”',
    shortName: 'æœºç”µ',
    icon: 'ğŸ”§',
    color: ThemeColors.SUBJECT_MECHANICAL,
    levels: MECHANICAL_LEVELS,
    totalStars: MECHANICAL_LEVELS.length * 3,
    earnedStars: 0,
    isUnlocked: false,
    order: 7
  }
];

/**
 * è·å–ç« èŠ‚æ•°æ®
 */
export function getChapterById(chapterId: string): GameChapter | undefined {
  return GAME_CHAPTERS.find((chapter: GameChapter) => chapter.id === chapterId);
}

/**
 * è·å–å…³å¡æ•°æ®
 */
export function getLevelById(levelId: string): GameLevel | undefined {
  for (const chapter of GAME_CHAPTERS) {
    const level = chapter.levels.find((l: GameLevel) => l.id === levelId);
    if (level) return level;
  }
  return undefined;
}

/**
 * è·å–ç« èŠ‚çš„æ‰€æœ‰å…³å¡
 */
export function getLevelsByChapterId(chapterId: string): GameLevel[] {
  const chapter = getChapterById(chapterId);
  return chapter ? chapter.levels : [];
}
